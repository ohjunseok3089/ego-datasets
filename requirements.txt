###############################################
# Unified Requirements for ego-datasets (GPU) #
###############################################
# Target: Python 3.10/3.11, CUDA 12.2
# Notes:
# - This stack enforces GPU for ONNX Runtime and uses CUDA 11.8 PyTorch wheels.
# - If you have a different CUDA version, adjust the PyTorch index URL and versions accordingly.
# - Installs OpenCV headless (no GUI). Replace with opencv-python if you need GUI windows.

# Use CUDA 12.1 wheels for torch/torchvision/torchaudio (works on CUDA 12.2)
--extra-index-url https://download.pytorch.org/whl/cu121

######## Core scientific stack (NumPy 2.x) ########
# Pin NumPy to <2.3 to satisfy cv2 4.12 wheels
numpy==2.2.6
pandas==2.2.3
scipy==1.14.1
scikit-image==0.24.0
scikit-learn==1.5.2
numexpr==2.10.1
bottleneck==1.4.2
tqdm==4.67.1
PyYAML==6.0.2
requests==2.32.3
matplotlib==3.8.4
seaborn==0.13.2
Pillow==10.4.0

######## Computer Vision / Media ########
# With NumPy 2.x, use OpenCV 4.12 wheels (require numpy>=2,<2.3)
opencv-python-headless==4.12.0.88

######## ONNX + InsightFace (GPU) ########
onnx==1.16.0
onnxruntime-gpu==1.22.0
insightface==0.7.3
hdbscan==0.8.33
easydict==1.13
albumentations==2.0.8
prettytable==3.16.0

######## PyTorch (CUDA 12.x) ########
torch==2.2.2+cu121
torchvision==0.17.2+cu121
torchaudio==2.2.2+cu121

######## CoTracker and utilities ########
timm==1.0.14
pycocotools==2.0.7
huggingface-hub>=0.30.0,<1.0
safetensors==0.4.3
supervision==0.22.0
psutil==5.9.8
py-cpuinfo==9.0.0
gradio==4.44.1
onnxslim==0.1.31

######## WhisperX (ASR + diarization helper) ########
whisperx>=3.1.1

######## Audio diarization (Aria) ########
pyannote.audio>=3.1.0
librosa>=0.10.0
soundfile>=0.12.1
ffmpeg-python>=0.2.0

# Optional: FAISS for graph-based face clustering (GPU). If install fails, comment out or install system-specific build.
# faiss-gpu>=1.7.0

# Optional: If you need OpenCV with GUI (highgui), replace headless with this:
# opencv-python==4.12.0.88

# Optional: If you need TensorRT EP for ONNX Runtime, install NVIDIA TensorRT separately.
protobuf
nvidia-cufft-cu12>=11.0
nvidia-cuda-nvrtc-cu12>=12.2
nvidia-cudnn-cu12>=9.0
